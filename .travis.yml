language: python
matrix:
    include:
        - python: 3.6
          dist: trusty
          sudo: false
        - python: 3.7
          dist: xenial
          sudo: true
          env: SKIP_PYLINT=true
addons:
  sonarcloud:
    organization: "kmindi-github" # the key of the org you chose at step #3
cache:
  directories:
  - "$HOME/.sonar/cache"
  - "$HOME/.cache/pip"
install:
  - pip install -r requirements.txt
script:
  - if [ "$SKIP_PYLINT" = "true" ]; then echo "Skip pylint"; else pylint src; fi
  - pytest --junitxml=xunitresult.xml --cov=. --cov-report=xml
  - sonar-scanner
